{% extends 'base.html' %}

{% block body %}
<div class="max-w-7xl mx-auto px-4 py-10">

  <!-- Top Bar -->
  <div class="flex justify-between items-center mb-8 glass p-4 rounded-2xl shadow-lg">
    <!-- Left: Dashboard -->
    <h2 class="text-2xl font-semibold text-white">{{ user.username }} Dashboard</h2>

    <!-- Right: Username + Logout -->
    <div class="flex items-center space-x-4">
      <a href="{{ url_for('logout') }}" 
         class="px-4 py-2 bg-red-500/80 text-white rounded-xl hover:bg-red-600/80 transition">
        Logout
      </a>
    </div>
  </div>

  <!-- Add Car Form -->
  <form action="{{ url_for('upload_file') }}" method="POST" enctype="multipart/form-data" 
        class="glass p-6 flex flex-col sm:flex-row gap-4 items-center justify-center mb-10 shadow-lg rounded-xl">
    <input type="text" name="name" placeholder="Car Name" 
           class="px-4 py-2 rounded-xl bg-white/10 text-white placeholder-white/70 focus:bg-white/20 outline-none transition w-full sm:w-auto" required>
    <input type="file" name="image" accept="image/*" 
           class="px-4 py-2 rounded-xl bg-white/10 text-white placeholder-white/70 focus:bg-white/20 outline-none transition w-full sm:w-auto" required>
    <input type="text" name="notes" placeholder="Notes" 
           class="px-4 py-2 rounded-xl bg-white/10 text-white placeholder-white/70 focus:bg-white/20 outline-none transition w-full sm:w-auto">
    <button type="submit" 
            class="px-6 py-2 bg-white/20 text-white font-semibold rounded-xl shadow-lg hover:bg-white/30 transition w-full sm:w-auto">
      âž• Add Car
    </button>
  </form>

  <!-- Car Grid -->
  {% if cars %}
  <div class="grid gap-6 
              grid-cols-1 
              sm:grid-cols-2 
              md:grid-cols-3 
              lg:grid-cols-4 
              xl:grid-cols-5">
    {% for car in cars %}
    <div class="glass p-4 rounded-2xl flex flex-col items-center shadow-lg hover:scale-105 transition transform">
      <img src="{{ url_for('static', filename='uploads/' ~ car.image_filename) }}" 
           alt="{{ car.name }}" class="w-36 h-36 sm:w-40 sm:h-40 md:w-44 md:h-44 object-cover rounded-xl mb-3 shadow-md">
      <h3 class="text-lg font-bold text-white mb-1 text-center truncate">{{ car.name }}</h3>
      <p class="text-sm text-white/70 mb-3 text-center truncate">{{ car.notes }}</p>
      <div class="flex space-x-2">
        <a href="{{ url_for('car_detail', car_id=car.id) }}" 
           class="px-3 py-1 bg-white/20 text-white rounded-xl hover:bg-white/30 transition">Details</a>
        <form action="{{ url_for('delete_car', car_id=car.id) }}" method="POST" onsubmit="return confirm('Delete this car?')">
          <button type="submit" 
                  class="px-3 py-1 bg-red-500/80 text-white rounded-xl hover:bg-red-600/80 transition">Delete</button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="text-center text-white/70 mt-10 text-lg">
    No cars yet! Add your first one ðŸ‘‰ <a href="{{ url_for('add_car') }}" class="underline">here</a>.
  </p>
  {% endif %}
</div>
{% endblock %}
